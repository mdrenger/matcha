'use strict'

const stations = require('vbb-stations')
const inside = require('@turf/inside')

const l채nder = require('./l채nder.geo.json')

const berlinB = l채nder.find((land) => {
	return land.properties && land.properties.GEN === 'Berlin'
})

const berlinA = {"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[13.288307189941404,52.52917227553519],[13.282814025878906,52.52624809700062],[13.283500671386717,52.517892228382834],[13.286933898925781,52.51371369804256],[13.280410766601562,52.502429681191614],[13.314743041992188,52.47922565896137],[13.347015380859375,52.477552824001755],[13.356628417968748,52.480689337378706],[13.3648681640625,52.47818014456486],[13.368644714355469,52.47148826410652],[13.382720947265625,52.4710699877883],[13.391647338867186,52.468141942250746],[13.403663635253906,52.46374950869897],[13.453788757324219,52.47127912644434],[13.460655212402344,52.49260604910341],[13.467521667480469,52.49845868996027],[13.470611572265623,52.50389258754797],[13.47644805908203,52.511415336975304],[13.469581604003904,52.52374150329884],[13.457565307617188,52.52624809700062],[13.447952270507812,52.53710835019913],[13.427009582519531,52.54452101890677],[13.42031478881836,52.54827907694563],[13.41482162475586,52.54953169145375],[13.387527465820312,52.54900977308688],[13.379459381103516,52.54827907694563],[13.356285095214844,52.537839232310276],[13.329505920410156,52.53439353869132],[13.288307189941404,52.52917227553519]]]}}

// https://github.com/juliuste/german-administrative-areas/raw/master/l채nder.geo.json

for (let s of stations()) {
	const p = {
		type: 'Feature',
		properties: {},
		geometry: {
			type: 'Point',
			coordinates: [s.coordinates.longitude, s.coordinates.latitude]
		}
	}

    // console.log(s.id, inside(p, berlinA))
    //if (inside(p, berlinB)) process.stdout.write(JSON.stringify(s))
    if (inside(p, berlinB)) console.log(s)
}
